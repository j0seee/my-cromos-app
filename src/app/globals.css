/* ======================================================
   globals.css — Versión consolidada con fonts + Navbar azul
   Incluye corrección del modal para permitir scroll arriba/abajo al hacer zoom
   Reemplaza el contenido anterior (haz backup primero)
   ====================================================== */

/* ================================
   Fonts modernos: Inter (texto) + Manrope (títulos)
   (pegar al principio para que se apliquen)
   ================================ */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Manrope:wght@500;600;700;800&display=swap');

:root{
  /* tipografías */
  --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-heading: "Manrope", "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

  /* paleta propuesta */
  --color-primary: #70D6FF;
  --color-secondary: #FF70A6;
  --color-orange: #FF9770;
  --color-yellow: #FFD670;
  --color-lime: #E9FF70;

  /* tonos / texto */
  --text-dark: #222;
  --muted: #666;
  --bg: #f8f9fa;

  /* elevaciones / z-index */
  --z-navbar: 1400;
  --z-dropdown: 20000;
  --z-modal: 30000;

  /* layout */
  --max-page-width: 1200px;
  --navbar-width-pct: 60%;

  /* variantes oscuras para contraste */
  --color-primary-d: #2AA3CE;
  --color-orange-d: #FF7A45;
  --color-yellow-d: #E0B63A;
  --color-lime-d: #BBD93A;
  --color-pink-d: #FF4D8A;

  /* glass specifics (usadas en otras partes) */
  --glass-bg: rgba(255,255,255,0.12);
  --glass-border: rgba(255,255,255,0.18);
  --glass-shadow: 0 18px 40px rgba(2,6,23,0.12);
  --glass-accent: rgba(255,255,255,0.35);
}

/* ---------------------------
   Reset / base
   --------------------------- */
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; overflow-x: hidden; background: var(--bg); color: var(--text-dark); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
main, #__next { max-width: 100vw; overflow-x: hidden; }

/* Base tipográfica */
html { font-family: var(--font-sans); }
body {
  font-family: var(--font-sans);
  font-weight: 400;
  line-height: 1.45;
  color: var(--text-dark);
}

/* Headings */
h1,h2,h3,h4,h5,h6 {
  font-family: var(--font-heading);
  font-weight: 700;
  margin: 0 0 0.5rem 0;
  letter-spacing: -0.02em;
  color: var(--text-dark);
}

/* utilidades */
.hidden { display: none !important; }
.hidden-visually { position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

/* ============================
   NAVBAR (sticky, flotante, centrada) — AZUL (paleta)
   ============================ */
.app-navbar {
  position: sticky;
  top: 16px;
  z-index: var(--z-navbar);
  display: flex;
  justify-content: center;
  padding: 8px 12px;
  transition: transform .32s cubic-bezier(.2,.9,.2,1), opacity .22s ease;
  pointer-events: auto;
}

/* hide on scroll state */
.app-navbar.nav--hidden { transform: translateY(-120%); opacity: 0; pointer-events: none; }

/* navbar-inner: azul sólido con ligera textura y sheen */
.navbar-inner {
  position: relative;
  width: var(--navbar-width-pct);
  max-width: 1100px;
  min-width: 320px;

  /* FONDO AZUL usando la paleta y gradiente */
  background: linear-gradient(180deg, var(--color-primary-d), var(--color-primary));
  color: white;
  border-radius: 20px;
  padding: 8px 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 0 auto;

  /* mantén un poco de backdrop filter para suavizar en navegadores que lo soporten (opcional) */
  backdrop-filter: blur(6px) saturate(110%);
  -webkit-backdrop-filter: blur(6px) saturate(110%);

  /* borde muy sutil para separar del fondo */
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 18px 40px rgba(2,6,23,0.14);

  transition: box-shadow .18s ease, transform .12s ease, background .12s ease, backdrop-filter .18s ease;
  overflow: visible;
}

/* sheen and subtle texture (ajustadas para ir sobre azul) */
.navbar-inner::before,
.navbar-inner::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  border-radius: inherit;
  pointer-events: none;
}
.navbar-inner::before {
  top: 0;
  height: 42%;
  /* Sheen at top-left but subtler for the colored background */
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.01));
  mix-blend-mode: overlay;
  opacity: 0.75;
  filter: blur(4px);
}
.navbar-inner::after {
  bottom: 0;
  height: 100%;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.02), transparent 6%),
    radial-gradient(circle at 80% 80%, rgba(0,0,0,0.02), transparent 8%);
  opacity: 0.12;
  mix-blend-mode: soft-light;
  transform: translateZ(0);
}

/* scrolled state: stronger shadow + subtle lift (keeps blue) */
.app-navbar.nav--scrolled .navbar-inner {
  box-shadow: 0 28px 60px rgba(2,6,23,0.18);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  transform: translateY(-2px);
}

/* layout internals */
.nav-side { display:flex; gap:8px; align-items:center; flex:0 0 auto; }
.nav-left { justify-content:flex-start; }
.nav-right { justify-content:flex-end; margin-left:auto; }
.nav-center { flex:1 1 auto; display:flex; justify-content:center; align-items:center; }

/* logo text */
.nav-logo-text {
  color: #fff;
  font-family: var(--font-heading);
  font-weight: 800;
  font-size: 1.05rem;
  letter-spacing: 0.4px;
  text-shadow: 0 2px 6px rgba(0,0,0,0.12);
  display: inline-block;
  transform: translateY(calc(var(--nav-offset, 0) * -0.08px));
  transition: transform .12s linear;
}

/* nav buttons base */
.nav-btn {
  position: relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 8px 14px;
  color: white;
  text-decoration:none;
  border-radius: 10px;
  font-weight: 800;
  font-family: var(--font-sans);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  transition: background .14s ease, transform .12s ease, box-shadow .12s ease;
  cursor: pointer;
  min-height: 40px;
  line-height: 1;
  box-shadow: 0 6px 14px rgba(2,6,23,0.06), inset 0 -1px 0 rgba(255,255,255,0.03);
}
.nav-btn.small { padding:6px 10px; font-size:0.95rem; border-radius:8px; }

.nav-btn:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 14px 34px rgba(2,6,23,0.12);
}

/* active state */
.nav-btn.active,
.nav-btn[aria-current="page"] {
  box-shadow: inset 0 -3px 0 rgba(0,0,0,0.08), 0 10px 30px rgba(2,6,23,0.16);
  transform: none;
}

/* accessibility focus */
.nav-btn:focus { outline: 3px solid rgba(255,255,255,0.12); outline-offset: 3px; }

/* user text */
.nav-user { color: rgba(255,255,255,0.95); font-weight:700; margin-right:6px; font-size:0.92rem; text-shadow: 0 1px 0 rgba(0,0,0,0.08); }

/* hide navbar when modal opened (safety) */
body.modal-open .app-navbar { display:none !important; }

/* optional: dim/blur background when modal open */
.modal-open #__next > *:not(.modal-overlay) {
  filter: blur(0.6px) brightness(0.95);
  user-select: none;
  pointer-events: none;
}

/* ===========================
   FRIENDS / NOTIF BADGE
   =========================== */
.friends-btn { display:inline-flex; align-items:center; gap:8px; position:relative; }
.notif-badge {
  display:inline-flex; align-items:center; justify-content:center;
  min-width: 20px; height: 20px; padding: 0 6px;
  background: var(--color-secondary); color: #fff; font-weight:800; font-size:0.85rem;
  border-radius: 999px; box-shadow: 0 6px 14px rgba(0,0,0,0.15); line-height:1;
}
.notif-badge.top-right { position:absolute; top:-8px; right:-8px; min-width:22px; height:22px; padding:0 7px; }

/* pulse animation */
@keyframes pulseBadge { 0% { transform: translateY(0) scale(1); } 30% { transform: translateY(-2px) scale(1.03); } 100% { transform: translateY(0) scale(1); } }
.nav-btn.friends-btn.pulse { animation: pulseBadge 800ms ease; }

/* ============================
   FRIENDS PAGE / DROPDOWN
   ============================ */
.friends-page { display:block; gap:16px; }
.friends-grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); align-items:start; margin-top:12px; }

.friend-card {
  background:#fff; border-radius:10px; padding:12px;
  box-shadow: 0 8px 20px rgba(2,6,23,0.06);
  display:flex; gap:12px; align-items:center; justify-content:space-between;
}
.friend-card .info { display:flex; gap:12px; align-items:center; }
.friend-card .avatar { width:52px; height:52px; border-radius:8px; object-fit:cover; background:linear-gradient(180deg,#eee,#fff); }
.friend-card .meta { display:flex; flex-direction:column; gap:4px; }
.friend-card .meta .name { font-weight:800; color:var(--text-dark); }
.friend-card .meta .small { font-size:13px; color:var(--muted); }
.friend-card .actions { display:flex; gap:8px; align-items:center; }

.friend-requests-list { display:grid; gap:10px; margin-top:8px; }
.friend-request { background:#fff; border-radius:8px; padding:10px; display:flex; align-items:center; justify-content:space-between; box-shadow: 0 6px 18px rgba(2,6,23,0.04); }
.friend-request .who { font-weight:700; color:var(--text-dark); }
.friend-request .when { font-size:13px; color:var(--muted); }

/* buttons */
.btn-ghost { background:transparent; color:var(--text-dark); border:1px solid rgba(0,0,0,0.06); padding:8px 12px; border-radius:8px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; }
.btn-primary { background:var(--color-primary); color:#fff; padding:8px 12px; border-radius:8px; font-weight:700; cursor:pointer; }

/* friends dropdown styles */
.friends-dropdown {
  position:absolute; right:0; top:calc(100% + 10px);
  width: min(420px, 86vw);
  background: white; border-radius:12px;
  box-shadow: 0 20px 48px rgba(2,6,23,0.18);
  overflow:hidden; z-index: var(--z-dropdown);
  border:1px solid rgba(0,0,0,0.06);
  animation: dropdownFade 180ms ease both;
}
@keyframes dropdownFade { from { transform: translateY(-6px) scale(.99); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

.friends-dropdown .dropdown-header { display:flex; align-items:center; gap:12px; padding:10px 12px; border-bottom:1px solid rgba(0,0,0,0.04); background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.98)); }
.friends-dropdown .dropdown-body { max-height:320px; overflow:auto; display:flex; flex-direction:column; }
.friends-dropdown .dropdown-footer { padding:8px; border-top:1px solid rgba(0,0,0,0.04); display:flex; justify-content:center; gap:8px; }

/* small avatar inside dropdown */
.friends-dropdown .avatar { width:44px; height:44px; border-radius:8px; object-fit:cover; background:linear-gradient(180deg,#eee,#fff); box-shadow: 0 6px 18px rgba(2,6,23,0.06); }

/* ---------------------------
   Modal (imagen ampliada, con zoom y scroll)
   --------------------------- */

/* Overlay */
.modal-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center; /* por defecto centra el cuadro modal */
  justify-content: center;
  z-index: var(--z-modal);
  background-color: rgba(0,0,0,0.18);
  animation: modalFadeIn .18s ease forwards;
}

/* modal content box */
.modal-content {
  position: relative;
  width: min(95vw, 1200px);
  height: min(95vh, 1000px);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  padding: 12px;
  background: transparent;
  box-shadow: 0 12px 40px rgba(2,6,23,0.4);
}

/* inner scrollable container.
   por defecto centra la imagen - cuando la imagen está ampliada (data-zoomed="true")
   cambiamos align-items a flex-start para permitir scroll hacia arriba */
.modal-inner {
  width: 100%;
  height: 100%;
  overflow: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-overflow-scrolling: touch;
  padding: 8px;
  scroll-behavior: smooth;
}

/* cuando la imagen está ampliada, alinea desde arriba para que se pueda desplazar hacia arriba */
.modal-inner[data-zoomed="true"] {
  align-items: flex-start !important;
  padding-top: 20px; /* evita pegar la imagen al borde superior */
}

/* imagen modal: usar transform para zoom (JS aplica scale) */
.modal-image {
  display: block;
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 8px 30px rgba(2,6,23,0.45);
  transform-origin: top center; /* importante para comportamiento de zoom */
  transition: transform .18s ease;
  will-change: transform;
  user-select: none;
}

/* controls de zoom */
.zoom-controls {
  position: absolute;
  top: 10px;
  right: 12px;
  display: flex;
  gap: 8px;
  z-index: calc(var(--z-modal) + 10);
}
.zoom-btn {
  background: rgba(255,255,255,0.98);
  color: var(--text-dark);
  border: 1px solid rgba(0,0,0,0.08);
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 800;
  min-width: 44px;
  box-shadow: 0 6px 14px rgba(2,6,23,0.08);
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
}
.zoom-btn:hover { transform: translateY(-2px); background: white; }
.zoom-btn:disabled { opacity: 0.6; cursor: not-allowed; }

/* Animaciones */
@keyframes modalFadeIn { from { opacity: 0; } to { opacity: 1; } }

/* ---------------------------
   Layout / page container
   --------------------------- */
.page-container { width: min(var(--max-page-width), 96%); max-width: var(--max-page-width); margin:0 auto; padding:12px; box-sizing: border-box; }

/* ---------------------------
   Grid / cards helpers (si los usas)
   --------------------------- */
.cards-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  align-items: start;
  margin-top: 12px;
}

/* tarjeta básica */
.card {
  position: relative;
  background: white;
  border-radius: 12px;
  overflow: hidden;
  padding: 12px;
  box-shadow: 0 6px 18px rgba(16,24,40,0.06);
  transition: transform .16s ease, box-shadow .16s ease;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-height: 320px;
}
.card:hover { transform: translateY(-6px) scale(1.01); box-shadow: 0 10px 30px rgba(16,24,40,0.12); }

/* badge cantidad */
.card-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--color-secondary);
  color: white;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 0.85rem;
  box-shadow: 0 6px 16px rgba(0,0,0,0.18);
  border: 2px solid rgba(255,255,255,0.2);
  z-index: 5;
}

/* imagen contenedor */
.card-image {
  width: 100%;
  height: 200px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: linear-gradient(180deg,#fff,#fbfbfb);
  border-radius:8px;
  overflow:hidden;
  margin-bottom:12px;
  flex-shrink:0;
}
.card-image img { max-width:100%; max-height:100%; object-fit:contain; display:block; }

/* texto */
.card-body { display:flex; flex-direction:column; gap:8px; flex-grow:1; }
.card h2 { font-size:1rem; color:var(--text-dark); text-overflow:ellipsis; overflow:hidden; white-space:nowrap; }
.card .code { font-size:0.85rem; color:var(--muted); }

/* estrellas y diamantes */
.star { color: var(--color-yellow); font-size:1rem; line-height:1; }
.star-empty { color:#e6e6e6; }
.diamond { color: var(--color-secondary); font-size:1rem; }

/* ---------------------------
   Variantes de color para nav-btn (base)
   --------------------------- */
.nav-btn--primary { background: linear-gradient(180deg, rgba(112,214,255,0.98), rgba(112,214,255,0.92)); color: #042028; }
.nav-btn--primary:hover { filter: brightness(.95); }

.nav-btn--orange { background: linear-gradient(180deg, var(--color-orange), color-mix(in srgb, var(--color-orange) 85%, white)); color: #111; }
.nav-btn--orange:hover { filter: brightness(.95); }

.nav-btn--yellow { background: linear-gradient(180deg, var(--color-yellow), color-mix(in srgb, var(--color-yellow) 85%, white)); color: #111; }
.nav-btn--yellow:hover { filter: brightness(.95); }

.nav-btn--lime { background: linear-gradient(180deg, var(--color-lime), color-mix(in srgb, var(--color-lime) 85%, white)); color: #111; }
.nav-btn--lime:hover { filter: brightness(.94); }

.nav-btn--pink {
  background: linear-gradient(180deg, var(--color-secondary), color-mix(in srgb, var(--color-secondary) 85%, white));
  color: #111;
}
.nav-btn--pink:hover { filter: brightness(.93); }

.nav-btn--primary,
.nav-btn--orange,
.nav-btn--yellow,
.nav-btn--lime,
.nav-btn--pink { border: 1px solid rgba(0,0,0,0.06); box-shadow: 0 8px 22px rgba(2,6,23,0.08); }

/* active shadow persistence */
.nav-btn.active,
.nav-btn[aria-current="page"] { box-shadow: inset 0 -3px 0 rgba(0,0,0,0.06), 0 8px 26px rgba(2,6,23,0.14); transform: none; }

/* friends badge contrast */
.friends-btn .notif-badge { color:#fff; font-weight:900; }

/* fallback for color-mix */
@supports not (color-mix(in srgb, var(--color-orange) 85%, white)) {
  .nav-btn--orange { background: var(--color-orange); }
  .nav-btn--yellow { background: var(--color-yellow); }
  .nav-btn--lime { background: var(--color-lime); }
  .nav-btn--pink { background: var(--color-secondary); }
}

/* ============================
   Overrides específicos para .navbar-inner (garantiza contraste)
   (mantenidos al final para prioridad)
   ============================ */
.navbar-inner a.nav-btn.nav-btn--primary {
  background: linear-gradient(180deg, var(--color-primary-d), var(--color-primary)) !important;
  color: #042028 !important;
  border-color: rgba(0,0,0,0.08) !important;
  box-shadow: 0 10px 26px rgba(2,6,23,0.12) !important;
}
.navbar-inner a.nav-btn.nav-btn--orange {
  background: linear-gradient(180deg, var(--color-orange-d), var(--color-orange)) !important;
  color: #121212 !important;
  border-color: rgba(0,0,0,0.08) !important;
  box-shadow: 0 10px 26px rgba(2,6,23,0.12) !important;
}
.navbar-inner a.nav-btn.nav-btn--yellow {
  background: linear-gradient(180deg, var(--color-yellow-d), var(--color-yellow)) !important;
  color: #121212 !important;
  border-color: rgba(0,0,0,0.08) !important;
  box-shadow: 0 10px 26px rgba(2,6,23,0.12) !important;
}
.navbar-inner a.nav-btn.nav-btn--lime {
  background: linear-gradient(180deg, var(--color-lime-d), var(--color-lime)) !important;
  color: #111 !important;
  border-color: rgba(0,0,0,0.08) !important;
  box-shadow: 0 10px 26px rgba(2,6,23,0.12) !important;
}
.navbar-inner a.nav-btn.nav-btn--pink {
  background: linear-gradient(180deg, var(--color-pink-d), var(--color-secondary)) !important;
  color: #111 !important;
  border-color: rgba(0,0,0,0.08) !important;
  box-shadow: 0 10px 26px rgba(2,6,23,0.12) !important;
}

/* asegurar estado activo mantenga variante */
.navbar-inner a.nav-btn.nav-btn--primary.active,
.navbar-inner a.nav-btn.nav-btn--primary[aria-current="page"] {
  background: linear-gradient(180deg, var(--color-primary-d), var(--color-primary)) !important;
}
.navbar-inner a.nav-btn.nav-btn--orange.active,
.navbar-inner a.nav-btn.nav-btn--orange[aria-current="page"] {
  background: linear-gradient(180deg, var(--color-orange-d), var(--color-orange)) !important;
}
.navbar-inner a.nav-btn.nav-btn--yellow.active,
.navbar-inner a.nav-btn.nav-btn--yellow[aria-current="page"] {
  background: linear-gradient(180deg, var(--color-yellow-d), var(--color-yellow)) !important;
}
.navbar-inner a.nav-btn.nav-btn--lime.active,
.navbar-inner a.nav-btn.nav-btn--lime[aria-current="page"] {
  background: linear-gradient(180deg, var(--color-lime-d), var(--color-lime)) !important;
}
.navbar-inner a.nav-btn.nav-btn--pink.active,
.navbar-inner a.nav-btn.nav-btn--pink[aria-current="page"] {
  background: linear-gradient(180deg, var(--color-pink-d), var(--color-secondary)) !important;
}

/* asegurar contraste del badge dentro de navbar */
.navbar-inner .nav-btn .notif-badge { color: #fff !important; font-weight: 900; }

/* tiny fallback para navegadores sin soporte de gradientes avanzados */
@supports not (background: linear-gradient(180deg,var(--color-primary-d),var(--color-primary))) {
  .navbar-inner a.nav-btn.nav-btn--primary { background: var(--color-primary-d) !important; }
  .navbar-inner a.nav-btn.nav-btn--orange  { background: var(--color-orange-d) !important; }
  .navbar-inner a.nav-btn.nav-btn--yellow  { background: var(--color-yellow-d) !important; }
  .navbar-inner a.nav-btn.nav-btn--lime    { background: var(--color-lime-d) !important; }
  .navbar-inner a.nav-btn.nav-btn--pink    { background: var(--color-pink-d) !important; }
}

/* ---------------------------
   Responsive tweaks
   --------------------------- */
@media (max-width: 880px) {
  .navbar-inner { width: 92%; padding: 10px; gap: 8px; }
  .nav-center { order: 1; flex-basis: 100%; text-align: center; margin: 6px 0; }
  .nav-left, .nav-right { flex-basis: auto; }
  .nav-logo-text { font-size: 0.98rem; }
}
@media (max-width: 640px) {
  .friends-dropdown { right: 8px; left: 8px; width: auto; top: calc(100% + 8px); }
  .friend-card { flex-direction: column; align-items: flex-start; }
  .friend-request.dropdown-item { gap: 8px; padding: 8px; }
  .card { min-height: 300px; }
  .card-image { height: 180px; }
}

/* End of file */
